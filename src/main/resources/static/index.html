<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="lib/litany.ico">

    <title>Blog Template for Bootstrap</title>

    <!-- Bootstrap core CSS -->
    <link href="lib/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link href="lib/assets/css/ie10-viewport-bug-workaround.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="lib/blog.css" rel="stylesheet">
    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]>
    <script src="lib/assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="lib/assets/js/ie-emulation-modes-warning.js"></script>
    <!--md to html-->
    <script src="lib/assets/js/marked.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>
<style>
    html, body {
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
    }

    .left-box {
        width: 91%;
        height: 91%;
    }

    .left-box > .form {
        width: 91%;
        height: 90%;
    }

    .left-box > .form > span, .left-box > .form > span > nav {
        width: 100%;
        height: 100%;
    }

    .container-fluid {
        height: 91%;
        overflow-y: auto;
        overflow-x: hidden;
    }
</style>

<div class="blog-masthead">
    <div class="container">
        <nav class="blog-nav">
            <a class="blog-nav-item active" href="#">Home</a>
            <a class="blog-nav-item" href="#">New features</a>
            <a class="blog-nav-item" href="#">Press</a>
            <a class="blog-nav-item" href="#">New hires</a>
            <a class="blog-nav-item" href="#">About</a>
        </nav>
    </div>
</div>
<div class="col-md-3 col-xl-2 bd-sidebar left-box" id="look" style="padding-top:20px;max-width:18%;position:fixed">
    <form role="search" id="select" class="bd-search d-flex align-items-center form" hidden="hidden">
        <span class="algolia-autocomplete"
              style="position: relative; display: inline-block; direction: ltr;"><input
                type="search" class="form-control ds-input" id="search-input" placeholder="Search..."
                style="position: relative; vertical-align: top;width: 97%">
        <nav style="padding-top: 5px" id="bd-docs-nav" aria-label="Main navigation">
                <ul class="container-fluid" style="width:auto;padding-top: 5px;border-right:2px solid #2aabd2">
                 <div class="nav">
                    <li>
                        <a class="bd-toc-link" onclick="dateBlog()" href="javascript:;">日期分类</a>
                    </li>

                    <li>
                        <a class="bd-toc-link" id="tagBlog" href="javascript:;">标签分类</a>
                    </li>
                 </div>
                </ul>


        </nav>
         </span>
    </form>
</div>

<div class="container">

    <div class="blog-header">
        <h1 class="blog-title">The Bootstrap Blog</h1>
        <p class="lead blog-description" id="subtitle">The official example template of creating a blog with
            Bootstrap.</p>
    </div>

    <div class="row">

        <div class="col-sm-8 blog-main">

            <div class="blog-post">
                <h2 class="blog-post-title">Sample blog post</h2>

                <p class="blog-post-meta">January 1, 2014 by <a href="#">Mark</a></p>
                <br>
                <div id="blogContent">


                </div><!-- /.blog-post -->


            </div><!-- /.blog-post -->

            <nav>
                <ul class="pager">
                    <li><a href="#">Previous</a></li>
                    <li><a href="#">Next</a></li>
                </ul>
            </nav>

        </div><!-- /.blog-main -->

        <div class="col-sm-3 col-sm-offset-1 blog-sidebar">
            <div class="sidebar-module sidebar-module-inset">
                <p>
                    漫漫寒風天地霜，<br>
                    山窮盡時路尤長。<br>
                    其修遠兮人何去？<br>
                    求道終來見極光。<br>
                </p>
            </div>
            <div class="sidebar-module">
                <h4>Newest</h4>
                <ol class="list-unstyled" id="newest" style="height: 240px;width: auto">
                    <li><a id="findOffBlog" href="javascript:;">March 2014</a></li>
                    <li><a href="#">February 2014</a></li>
                    <li><a href="#">January 2014</a></li>
                    <li><a href="#">December 2013</a></li>
                    <li><a href="#">November 2013</a></li>
                    <li><a href="#">October 2013</a></li>
                    <li><a href="#">September 2013</a></li>
                    <li><a href="#">August 2013</a></li>
                    <li><a href="#">July 2013</a></li>
                    <li><a href="#">June 2013</a></li>
                    <li><a href="#">May 2013</a></li>
                    <li><a href="#">April 2013</a></li>
                </ol>
            </div>
            <div class="sidebar-module">
                <h4>Region</h4>
                <ol class="list-unstyled">
                    <li><a onclick="region_click(this)" href="#">All</a></li>
                    <li><a onclick="region_click(this)" href="#">Draft</a></li>
                    <li><a onclick="region_click(this)" id="region" href="#">Official</a></li>
                </ol>
            </div>
        </div><!-- /.blog-sidebar -->

    </div><!-- /.row -->

</div><!-- /.container -->

<footer class="blog-footer">
    <p>Admin for <a href="http://getbootstrap.com">Litany.cn</a> by <a
            href="https://litany.cn">@Litany</a>.</p>
    <p>
        <a href="#">Back to top</a>
    </p>
</footer>


<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="lib/dist/js/jquery1.12.4min.js"></script>
<script>window.jQuery || document.write('<script src="lib/assets/js/vendor/jquery.min.js"><\/script>')</script>
<script src="lib/dist/js/bootstrap.min.js"></script>
<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
<script src="lib/assets/js/ie10-viewport-bug-workaround.js"></script>


<script>

    let blogList;
    let blogDateMap;
    let index;
    let region = "Official";


    function region_click(v) {
        $("#region").removeAttr("id")
        $(v).attr("id", "region");
        region = v.text;
        load();
    }

    function  back() {
        $(".nav").html("<li>\n" +
            "                        <a class=\"bd-toc-link\" onclick='dateBlog()'  href=\"javascript:;\">日期分类</a>\n" +
            "                    </li>\n" +
            "\n" +
            "                    <li>\n" +
            "                        <a class=\"bd-toc-link\" id=\"tagBlog\" href=\"javascript:;\">标签分类</a>\n" +
            "                    </li>")
    }

    function load() {
        $.ajax({
            url: "newest",
            data: {username: "Litany-lty", region: region},
            method: "GET",
            dataType: "json",
            success: function (data) {
                $("#newest").html("");
                var str = "";
                blogList = data;
                $.each(data, function (n, v) {
                    var title = v.title;
                    if (n === 0) {
                        findBlog(title)
                    }
                    title = title.substring(11, title.length - 3);
                    str += '<li ><a id="findBlog" href="javascript:;" onclick="findBlog(\'' + title + '\')">' + title + '</a></li>';
                });
                $("#newest").html(str);
            }
        });

    }
    function findBlogList(date){
        let list =blogDateMap[date];
        let str='';
        $.each(list,function (n, v) {
            str+='<li>\n' +
                '                        <a class="bd-toc-link" onclick="findBlog('+v.title+')" href="javascript:;">'+v.title+'</a>\n' +
                '                    </li>'
        });
        str+='<li>\n' +
            '                        <a class="bd-toc-link" onclick="dateBlog()" href="javascript:;">返回上级</a>\n' +
            '                    </li>'
        $(".nav").html(str)

    }

    function dateBlog() {
        $.ajax({
            url: "dateBlog",
            data: {region: region},
            method: "GET",
            dataType: "json",
            success: function (data) {
                blogDateMap  = eval(data);
                let str ='';
                for (let key in blogDateMap) {
                    str+='<li>\n' +
                        '                        <a class="bd-toc-link" onclick="findBlogList('+key+')" href="javascript:;">'+key+'</a>\n' +
                        '                    </li>'
                }
                str+='<li>\n' +
                    '                        <a class="bd-toc-link" onclick="back()" href="javascript:;">返回上级</a>\n' +
                    '                    </li>'
                $(".nav").html(str)
            }
        });
    }
    function findBlog(blogName) {
        $.ajax({
            url: "findBlog",
            data: {username: "Litany-lty", blogName: blogName, region: region},
            method: "GET",
            dataType: "json",
            success: function (data) {
                let top = data.top;
                let context = data.context;
                $(".blog-title").text(top.tags);
                $(".blog-post-title").text(top.title);
                $(".blog-post-meta").html(top.date + "   Create by  <a href=\"/about.html\">" + top.author + "</a>");
                $("#subtitle").text(top.subtitle);
                let s = marked(context.note) + "<br>" + marked(context.content);

                $("#blogContent").html(s);
            }
        });
    }

    $(function () {


        <!-- 控制样式的script -->
        fadeShow();

        $(".blog-nav-item").click(function () {
            $(".blog-nav-item").attr("class", "blog-nav-item");
            $(this).attr("class", "blog-nav-item active");
        });
        $(function () {
            $("#look").mouseleave(function () {
                fadeOut()
            })
            $("#look").mouseover(function () {
                fadein();
            })
        })

        function fadein() {
            $("#select").fadeIn(300);
        }

        function fadeOut() {
            $("#select").fadeOut(300);
        }

        function fadeShow() {
            setTimeout(fadein, 3000);
            setTimeout(fadeOut, 8000);
        }

        <!--发送请求的script-->
        load();


    });

</script>

</body>
</html>
